---
tags:
  - CYBERSECURITY
curso: Cisco - CyberOps Associate
---
## O que vou aprender neste módulo?

**Título do módulo: Protocolo** Ethernet e IP

**Objetivo do Módulo:** Explique como os protocolos Ethernet e IP oferecem suporte à comunicação de rede.

|**Título do Tópico**|**Objetivo do Tópico**|
|---|---|
|Ethernet|Explicar como a Ethernet oferece suporte à comunicação de rede.|
|IPv4|Explicar como o protocolo IPv4 oferece suporte às comunicações de rede.|
|Noções básicas de endereçamento IP|Explicar como os endereços IP viabilizam a comunicação de rede.|
|Tipos de endereços IPv4|Explicar os tipos de endereços IPv4 que viabilizam a comunicação de rede.|
|O gateway padrão|Explicar como o gateway padrão viabiliza a comunicação de rede.|
|IPv6|Explicar como o protocolo IPv6 oferece suporte às comunicações de rede.|
# Ethernet;
## Encapsulamento Ethernet
Ethernet e LAN sem fio (WLANs) são as duas tecnologias LAN mais comumente implantadas. Ao contrário da rede sem fio, a Ethernet usa comunicações com fio, incluindo par trançado, links de fibra óptica e cabos coaxiais.

Ela opera na camada de enlace de dados e na camada física. É uma família de tecnologias de rede definidas nos padrões IEEE 802.2 e 802.3. Ethernet oferece suporte às seguintes larguras de banda de dados:

- 10 Mbps
- 100 Mbps
- 1000 Mbps (1 Gbps)
- 10,000 Mbps (10 Gbps)
- 40,000 Mbps (40 Gbps)
- 100,000 Mbps (100 Gbps)

Conforme mostrado na figura, os padrões Ethernet definem os protocolos da camada 2 e as tecnologias da camada 1.

### Ethernet e o modelo OSI
![[Pasted image 20240123111549.png]]

Ethernet é definida por protocolos de camada física e de camada de enlace de dados.

## Campos de um Quadro Ethernet
O tamanho mínimo de quadro Ethernet é 64 bytes e o máximo é 1518 bytes. Isso inclui todos os bytes do campo de endereço MAC de destino através do campo FCS (Frame Check Sequence). O campo de preâmbulo não é incluído ao descrever o tamanho do quadro.

Qualquer quadro com comprimento menor que 64 bytes é considerado um"fragmento de colisão" ou um "quadro desprezível" e é automaticamente descartado pelas estações receptoras. Quadros com mais de 1.500 bytes de dados são considerados “jumbo” ou “baby giant”.

Se o tamanho de um quadro transmitido for menor que o mínimo ou maior que o máximo, o dispositivo receptor descarta o quadro. É provável que quadros perdidos sejam resultado de colisões ou outros sinais indesejados. Eles são considerados inválidos. No entanto, as interfaces Fast Ethernet e Gigabit Ethernet de alguns switches Cisco Catalyst podem ser configuradas para suportar quadros jumbo maiores.

A figura mostra cada campo no quadro Ethernet. Consulte a tabela para obter mais informações sobre a função de cada campo.

O diagrama mostra os campos de um quadro Ethernet. From left to right the fields and their length are: Preamble and SFD, 8 bytes; destination MAC address, 6 bytes; source MAC address, 6 bytes; type / length, 2 bytes; data, 46 - 1500 bytes; and F C S, 4 bytes. Excluding the first field, the total number of bytes in the remaining fields is between 64 – 1518 bytes.

### Campos do quadro Ethernet
![[Pasted image 20240123111634.png]]

|Campo|Descrição|
|---|---|
|Campos Preâmbulo e Delimitador Início de Quadro|O Preâmbulo (7 bytes) e o Delimitador de Quadro Inicial (SFD), também chamado de Início do Frame (1 byte), os campos são usados para sincronização entre o dispositivos de envio e recepção. Estes primeiros oito bytes do quadro são usado para chamar a atenção dos nós de recepção. Essencialmente, o primeiro poucos bytes informam aos receptores para se prepararem para receber um novo quadro.|
|Campo Endereço MAC de Destino|Este campo de 6 bytes é o identificador do destinatário desejado. Como você , esse endereço é usado pela Camada 2 para auxiliar dispositivos no determinar se um quadro é endereçado a eles. O endereço no quadro é em comparação com o endereço MAC no dispositivo. Se houver uma correspondência, o aceita o quadro. Pode ser unicast, multicast ou broadcast endereço:|
|Campo Endereço MAC de Origem|Esse campo de 6 bytes identifica a NIC ou interface de origem do quadro. Um endereço MAC de origem só pode ser um endereço unicast.|
|Tipo/Comprimento|Este campo de 2 bytes identifica o protocolo da camada superior encapsulado em o quadro Ethernet. Os valores comuns são, em hexadecimal, 0x800 para IPv4, 0x86DD para IPv6 e 0x806 para ARP.  <br>**Nota**: Você também pode ver este campo referido como EtherType, Tipo ou Comprimento.|
|Campo Dados|Este campo (46 - 1500 bytes) contém os dados encapsulados de um camada superior, que é uma PDU de Camada 3 genérica, ou mais comumente, um IPv4 pacote. Todos os quadros devem ter pelo menos 64 bytes. Se um pequeno pacote for encapsulado, bits adicionais chamados pad são usados para aumentar o tamanho do quadro para este tamanho mínimo.|
|Campo Sequência de Verificação de Quadro|O campo FCS (Frame Check Sequence) (4 bytes) é usado para detectar erros em um quadro. Ele utiliza uma verificação de redundância cíclica (CRC). O dispositivo de envio inclui os resultados de um CRC no campo FCS do quadro. O comando O dispositivo receptor recebe o quadro e gera um CRC para procurar erros. Se o cálculo corresponder, significa que não houve erro. Cálculos que não coincidem são uma indicação de que os dados foram alterados; Portanto, o quadro é descartado. Uma alteração nos dados pode ser o resultado de um interrupção dos sinais elétricos que representam os bits.|

## Formato do Endereço MAC

A figura é três colunas mostrando os equivalentes decimal e hexadecimais de números binários de 4 bits selecionados. Da esquerda para a direita, os cabeçalhos das colunas são: decimal, binário e hexadecimal. Cada coluna tem 16 linhas abaixo do cabeçalho.

### Equivalentes decimais e binários de 0 a F Hexadecimal
![[Pasted image 20240123111702.png]]

Um endereço MAC Ethernet é um valor binário de 48 bits expresso como 12 dígitos hexadecimais (4 bits por dígito hexadecimal). Os dígitos hexadecimais usam os números de 0 a 9 e as letras de A a F. A figura mostra os valores decimais e hexadecimais equivalentes para 0000 a 1111 binários. Hexadecimal é comumente usado para representar dados binários. Endereços IPv6 são outro exemplo de endereçamento hexadecimal.

Dependendo do dispositivo e do sistema operacional, você verá várias representações de endereços MAC, conforme exibido na figura abaixo.

A Figura 1 mostra uma tabela de valores decimais entre 0 e 15 com o equivalente Binário e Hexadecimal. Esta tabela mostra porque Hexadecimal tem letras de A a F, juntamente com números de 0 a 9. A Figura 2 mostra que um Endereço MAC pode ser representado com traços, dois pontos ou pontos.

### Diferentes Representações de Endereços MAC
![[Pasted image 20240123111720.png]]

Todos os dados que viajam na rede são encapsulados em quadros Ethernet. Um analista de segurança cibernética deve ser capaz de interpretar os dados Ethernet que são capturados por analisadores de protocolo e outras ferramentas.

# IPv4
## A camada de Rede

A camada de rede, ou Camada OSI 3, fornece serviços para permitir que dispositivos finais troquem dados entre redes. Como mostrado na figura, IP versão 4 (IPv4) e IP versão 6 (IPv6) são os principais protocolos de comunicação de camada de rede. Outros protocolos de camada de rede incluem protocolos de roteamento, como OSPF (Open Shortest Path First) e protocolos de mensagens, como ICMP (Internet Control Message Protocol).

### Protocolos da Camada de Rede
![[Pasted image 20240123111752.png]]

Para realizar comunicações de ponta a ponta através dos limites da rede, os protocolos de camada de rede executam quatro operações básicas:

- **Endereçamento de dispositivos finais** – Os dispositivos finais devem ser configurados com um endereço IP exclusivo para identificação na rede.
- **Encapsulamento** – A camada de rede encapsula a unidade de dados de protocolo (PDU) da camada de transporte em um pacote. O processo de encapsulamento adiciona informações de cabeçalho IP, como os endereços IP dos hosts origem (emissor) e destino (receptor). O processo de encapsulamento é executado pela origem do pacote IP.
- **Roteamento** – A camada de rede fornece serviços para direcionar os pacotes para um host de destino em outra rede. Para trafegar para outras redes, o pacote deve ser processado por um roteador. A função do roteador é escolher o melhor caminho e direcionar os pacotes para o host de destino em um processo conhecido como roteamento. Um pacote pode atravessar muitos roteadores antes de chegar ao host de destino. Cada roteador que um pacote atravessa para chegar ao host de destino é chamado de salto.
- **Desencapsulamento** – Quando o pacote chega à camada de rede do host de destino, o host verifica o cabeçalho IP do pacote. Se o endereço IP de destino no cabeçalho corresponder ao seu próprio endereço IP, o cabeçalho IP será removido do pacote. Depois que o pacote é desencapsulado pela camada de rede, a PDU resultante da Camada 4 é transferida para o serviço apropriado na camada de transporte. O processo de desencapsulamento é executado pelo host de destino do pacote IP.

Diferentemente da camada de transporte (OSI Layer 4), que gerencia o transporte de dados entre os processos em execução em cada host, os protocolos de comunicação da camada de rede (ou seja, IPv4 e IPv6) especificam a estrutura de pacotes e o processamento usado para transportar os dados de um host para outro hospedeiro. A operação sem levar em consideração os dados contidos em cada pacote permite que a camada de rede transporte pacotes para diversos tipos de comunicações entre vários hosts.

## Encapsulamento IP

O IP encapsula o segmento da camada de transporte (a camada logo acima da camada de rede) ou outros dados adicionando um cabeçalho IP. O cabeçalho IP é usado para entregar o pacote ao host de destino.

A figura ilustra como a PDU da camada de transporte é encapsulada pela PDU da camada de rede para criar um pacote IP.

![[Pasted image 20240123111828.png]]

O processo de encapsulamento camada por camada possibilita o desenvolvimento e a expansão dos serviços nas diferentes camadas sem afetar outras camadas. Isso significa que os segmentos da camada de transporte podem ser imediatamente empacotados por IPv4 , IPv6 ou qualquer protocolo que venha a ser desenvolvido no futuro.

O cabeçalho IP é examinado por dispositivos de Camada 3 (ou seja, roteadores e switches de Camada 3) à medida que viaja através de uma rede até seu destino. É importante notar que as informações de endereçamento IP permanecem as mesmas desde o momento em que o pacote sai do host de origem até chegar ao host de destino, exceto quando traduzidas pelo dispositivo que executa a Tradução de Endereços de Rede (NAT) para IPv4.

**Observação**: O NAT é discutido em módulos posteriores.

Os roteadores implementam protocolos de roteamento para rotear pacotes entre redes. O roteamento realizado por esses dispositivos intermediários examina o endereçamento da camada de rede no cabeçalho do pacote. Em todos os casos, a parte de dados do pacote, ou seja, a PDU da camada de transporte encapsulada ou outros dados, permanece inalterada durante os processos da camada de rede.

## Características do IP
O IP foi desenvolvido como um protocolo com baixa sobrecarga. Ele fornece apenas as funções necessárias para enviar um pacote de uma origem a um destino por um sistema interconectado de redes. O protocolo não foi projetado para rastrear e gerenciar o fluxo de pacotes. Essas funções, se exigido, são realizadas por outros protocolos em outras camadas, principalmente TCP na Camada 4.

Estas são as características básicas da IP:

- **Sem conexão** - Não há conexão com o destino estabelecido antes do envio de pacotes de dados.
- **Melhor esforço** - o IP é inerentemente não confiável, porque a entrega de pacotes não é garantida.
- **Independente da mídia** - A operação é independente do meio (ou seja, cobre, fibra ótica ou sem fio) que carrega os dados.

## Sem Conexão
O IP não tem conexão, o que significa que nenhuma conexão ponta a ponta dedicada é criada pelo IP antes que os dados sejam enviados. A comunicação sem conexão é conceitualmente semelhante a enviar uma carta a alguém sem notificar o destinatário com antecedência. A figura resume esse ponto-chave.

um pacote, que consiste em um cabeçalho e segmento IP, é enviado de uma origem em uma rede para um destino em outra rede
### Sem conexão - Analogia
![[Pasted image 20240123111857.png]]

As comunicações de dados sem conexão funcionam com o mesmo princípio. Como mostra a figura, o IP não requer troca inicial de informações de controle para estabelecer uma conexão ponto a ponto antes do encaminhamento dos pacotes.
### Sem conexão - Rede
![[Pasted image 20240123111920.png]]

## Melhor esforço
O IP também não requer campos adicionais no cabeçalho para manter uma conexão estabelecida. Esse processo reduz bastante a sobrecarga do IP. No entanto, sem conexão de ponta a ponta pré-estabelecida, os remetentes não sabem se os dispositivos de destino estão presentes e funcionais ao enviar pacotes, nem sabem se o destino recebe o pacote ou se o dispositivo de destino pode acessar e ler o pacote.

O protocolo IP não garante que o pacote enviado seja, de fato, recebido. A figura ilustra a característica de entrega não confiável ou de melhor esforço do protocolo IP.

![[Pasted image 20240123111941.png]]

## Independente de Mídia
Não confiável significa que o IP não tem a capacidade de gerenciar e recuperar pacotes não entregues ou corrompidos. Isso ocorre porque, embora os pacotes IP sejam enviados com informações sobre o local da entrega, eles não contêm informações que podem ser processadas para informar ao remetente se a entrega foi bem-sucedida. Os pacotes podem chegar ao destino corrompidos, fora de sequência ou simplesmente não chegar. O IP não tem capacidade de retransmitir os pacotes em caso de erros.

Se os pacotes forem entregues fora de ordem ou estiver faltando algum pacote, as aplicações que usam os dados, ou serviços de camada superior, deverão resolver esses problemas. Isso permite que o IP funcione de forma bem eficiente. No conjunto de protocolos TCP / IP, a confiabilidade é o papel do protocolo TCP na camada de transporte.

O IP opera independentemente da mídia que transporta os dados nas camadas inferiores da pilha de protocolos. Conforme mostra a figura, os pacotes IP podem ser comunicados como sinais elétricos por cabo de cobre, sinais ópticos nas fibras ou sinais de rádio em redes sem fio.

O diagrama mostra uma topologia de rede dentro de uma nuvem com um pacote viajando por vários tipos de mídia entre dois hosts. Um pacote IP é mostrado movendo-se entre um host e um roteador através de uma conexão Ethernet de cobre. O primeiro roteador é conectado ao segundo roteador através de uma conexão serial de cobre. Um pacote IP é mostrado movendo-se entre o segundo roteador e um terceiro roteador através de uma conexão de fibra óptica. O terceiro roteador está conectado a um quarto roteador, que é um roteador sem fio. Um pacote IP é mostrado movendo-se entre o quarto roteador e um host através de uma conexão sem fio.

![[Pasted image 20240123112000.png]]

A camada de enlace de dados OSI é responsável por pegar um pacote IP e prepará-lo para transmissão pelo meio de comunicação. Isso significa que a entrega de pacotes IP não se limita a nenhum meio específico.

Há, no entanto, uma característica muito importante dos meios físicos que a camada de rede considera: o tamanho máximo da PDU que cada meio consegue transportar. Essa característica é chamada de unidade máxima de transmissão (maximum transmission unit - MTU). Parte das comunicações de controle entre a camada de enlace de dados e a camada de rede é a definição de um tamanho máximo para o pacote. A camada de enlace de dados passa o valor da MTU para a camada de rede. A camada de rede então determina o tamanho que os pacotes podem ter.

Em alguns casos, um dispositivo intermediário, geralmente um roteador, deve dividir um pacote IPv4 ao encaminhá-lo de um meio para outro com uma MTU menor. Esse processo é chamado fragmentação do pacote ou fragmentação. A fragmentação causa latência. Os pacotes IPv6 não podem ser fragmentados pelo roteador.

## Cabeçalho do Pacote IPv4
O IPv4 é um dos principais protocolos de comunicação de camada de rede. O cabeçalho do pacote IPv4 é usado para garantir que esse pacote seja entregue para sua próxima parada no caminho para seu dispositivo final de destino.

O cabeçalho de um pacote IPv4 consiste em campos com informações importantes sobre o pacote. Esses campos contêm números binários que são examinados pelo processo da Camada 3.

## Campos do cabeçalho de pacote IPv4
Os valores binários de cada campo identificam várias configurações do pacote IP. Os diagramas de cabeçalho de protocolo, cuja leitura é feita da esquerda para a direita, de cima para baixo, disponibilizam uma visualização para consultar ao discutir os campos de protocolo. O diagrama de cabeçalho de protocolo IP na figura identifica os campos de um pacote IPv4.

nomes e comprimento de bits de campos em um cabeçalho de pacote IPv4

### Campos no cabeçalho do pacote IPv4
![[Pasted image 20240123112058.png]]

Os dois campos mais referenciados são os endereços IP de origem e destino. Esses campos identificam a procedência do pacote e para onde ele vai. Normalmente, esses endereços não mudam durante a viagem da origem ao destino.

Os campos Tamanho do Cabeçalho de Internet (IHL), Tamanho Total e Soma de Verificação do Cabeçalho servem para identificar e validar o pacote.

Outros campos são usados para reorganizar um pacote fragmentado. O pacote IPv4 usa especificamente os campos Identificação, Flags e Deslocamento do Fragmento para organizar os fragmentos. Um roteador pode precisar fragmentar um pacote IPv4 ao encaminhá-lo de um meio para outro com uma MTU menor.

Os campos Opções e Preenchimento raramente são usados e estão além do escopo deste módulo.

# Noções básicas de endereçamento IP
## Partes de Rede e de Host
Um endereço IPv4 é um endereço hierárquico de 32 bits, composto por uma parte da rede e uma parte do host. Ao determinar a parte da rede versus a parte do host, você deve observar o fluxo de 32 bits, conforme mostrado na figura.

O diagrama mostra o detalhamento de um endereço IPv4 nas partes de rede e host. O endereço IPv4 é 192.168.10.10. Abaixo, o endereço é convertido em 11000000 10101000 00001010 00001010. Uma linha rastreada mostra a seleção entre partes da rede e host. Isso ocorre após o terceiro octeto e o 24º bit.

### Endereço IPv4
![[Pasted image 20240123112131.png]]

Os bits na parte de rede do endereço devem ser iguais em todos os dispositivos que residem na mesma rede. Os bits na parte de host do endereço devem ser exclusivos para identificar um host específico dentro de uma rede. Se dois hosts tiverem o mesmo padrão de bits na parte de rede especificada do fluxo de 32 bits, esses dois hosts residirão na mesma rede.

Mas como os hosts sabem qual parte dos 32 bits identifica a rede e qual identifica o host? Esse é o papel da máscara de sub-rede.

## A Máscara de Sub-Rede
Conforme mostrado na figura, atribuir um endereço IPv4 a um host requer o seguinte:

- **Endereço IPv4** - este é o endereço IPv4 exclusivo do host.
- **Máscara de sub-rede** – É usada para determinar a parte de rede de um endereço IPv4.

### Configuração IPv4 em um computador Windows
![[Pasted image 20240123112205.png]]

**Observação**: Um endereço IPv4 de gateway padrão é necessário para acessar redes remotas e os endereços IPv4 do servidor DNS são necessários para converter nomes de domínio em endereços IPv4.

A máscara de sub-rede IPv4 é usada para diferenciar a parte da rede da parte do host de um endereço IPv4. Quando um endereço IPv4 é atribuído a um dispositivo, a máscara de sub-rede é usada para determinar o endereço de rede do dispositivo. O endereço de rede representa todos os dispositivos na mesma rede.

A próxima figura mostra uma máscara de sub-rede de 32 bits em formatos decimais e binários pontilhados.

máscara de sub-rede de 255.255.255.0 no topo com a representação binária de 11111111 1111111 111111 0000000 abaixo; uma linha tracejada é desenhada após o terceiro octeto e o 24º bit

### Máscara de sub-rede
![[Pasted image 20240123112223.png]]

Observe como a máscara de sub-rede é uma sequência consecutiva de 1 bits, seguida por uma sequência consecutiva de 0 bits.

Para identificar as partes da rede e do host de um endereço IPv4, a máscara de sub-rede é comparada com o endereço IPv4 bit por bit, da esquerda para a direita, conforme mostrado na figura.

A figura mostra um endereço IPv4, escrito em decimal com ponto e binário, com a máscara de sub-rede abaixo, também escrito em ponto decimal e binário, usado para mostrar a divisão entre a parte da rede e a parte do host do endereço. O endereço IPv4 é 192.168.10.10 que é convertido para 11000000 10101000 00001010 00001010. A máscara de sub-rede é 255.255.255.0 que é convertida para 11111111 111111 111111 00000000. Uma linha rastreada mostra uma seleção entre partes da rede e host. Isso ocorre após o terceiro octeto e 24º bit.

### Associando um endereço IPv4 à sua máscara de sub-rede
![[Pasted image 20240123112236.png]]
Observe que, na verdade, a máscara de sub-rede não contém a parte da rede ou host de um endereço IPv4, apenas informa ao computador onde procurar a parte do endereço IPv4 que é a parte da rede e qual parte é a parte do host.

O processo real usado para identificar a parte da rede e a parte de host é chamado de AND.

## Comprimento do Prefixo
Expressar os endereços de rede e os endereços de host com o endereço da máscara de sub-rede em decimal com pontos pode ser complicado. Felizmente, existe um método alternativo para identificar uma máscara de sub-rede, um método chamado comprimento do prefixo.

O comprimento do prefixo é o número de bits definido como 1 na máscara de sub-rede. Está escrito em "notação de barra", que é anotada por uma barra (/) seguida pelo número de bits definido como 1. Portanto, conte o número de bits da máscara de sub-rede e preceda-o com uma barra.

Consulte a tabela para exemplos. A primeira coluna lista várias máscaras de sub-rede que podem ser usadas com um endereço de host. A segunda coluna mostra o endereço binário de 32 bits convertido. A última coluna mostra o comprimento do prefixo resultante.

Máscara de sub-rede Endereço de 32 bits convertido. A última coluna mostra o comprimento do prefixo resultante.

|**Máscara de Sub-Rede**|**Endereço de 32 bits**|**Comprimento do Prefixo**|
|---|---|---|
|255.0.0.0|11111111.00000000.00000000.00000000|/8|
|255.255.0.0|11111111.11111111.00000000.00000000|/16|
|255.255.255.0|11111111.11111111.11111111.00000000|/24|
|255.255.255.128|11111111.11111111.11111111.10000000|/25|
|255.255.255.192|11111111.11111111.11111111.11000000|/26|
|255.255.255.224|11111111.11111111.11111111.11100000|/27|
|255.255.255.240|11111111.11111111.11111111.11110000|/28|
|255.255.255.248|11111111.11111111.11111111.11111000|/29|
|255.255.255.252|11111111.11111111.11111111.11111100|/30|

**Observação** : Um endereço de rede também é conhecido como prefixo ou prefixo de rede. Portanto, o comprimento do prefixo é o número de 1 bits na máscara de sub-rede.

Ao representar um endereço IPv4 usando um comprimento de prefixo, o endereço IPv4 é gravado seguido do comprimento do prefixo sem espaços. Por exemplo, 192.168.10.10 255.255.255.0 seria gravado como 192.168.10.10/24. O uso de vários tipos de comprimentos do prefixo será discutido mais tarde. Por enquanto, o foco estará no prefixo /24 (ou seja, 255.255.255.0)

## Determinando a rede: Lógica AND
Um AND lógico é uma das três operações booleanas usadas na lógica booleana ou digital. As outras duas são OR e NOT. A operação AND é usada para determinar o endereço de rede.

AND lógico é a comparação de dois bits que produz os resultados mostrados abaixo. Observe como somente 1 AND 1 produz um 1. Qualquer outra combinação resulta em um 0.

- 1 E 1 = 1
- 0 E 1 = 0
- 1 E 0 = 0
- 0 E 0 = 0

**Observação** : Na lógica digital, 1 representa Verdadeiro e 0 representa Falso. Ao usar uma operação AND, ambos os valores de entrada devem ser Verdadeiro (1) para que o resultado seja Verdadeiro (1).

Para identificar o endereço de rede de um host IPv4, é feito um AND lógico, bit a bit, entre o endereço IPv4 e a máscara de sub-rede. Quando se usa AND entre o endereço e a máscara de sub-rede, o resultado é o endereço de rede.

Para ilustrar como AND é usado para descobrir um endereço de rede, considere um host com endereço IPv4 192.168.10.10 e máscara de sub-rede 255.255.255.0, conforme mostrado na figura:

- **Endereço de host IPv4 (192.168.10.10)** - O endereço IPv4 do host em formatos decimais pontilhados e binários.
- **Máscara de sub-rede (255.255.255.0)** - A máscara de sub-rede do host nos formatos decimal com pontos e binário.
- **Endereço de rede (192.168.10.0)** - A operação lógica AND entre o endereço IPv4 e a máscara de sub-rede resulta em um endereço de rede IPv4 mostrado nos formatos decimal com pontos e binário.

O diagrama mostra o processo de AND entre um endereço de host IPv4 e uma máscara de sub-rede, resultando no endereço de rede IPv4 do host. O endereço de host IPv4 é 192.168.10.10. Abaixo disso, o endereço é convertido em 11000000 10101000 00001010 00001010. Abaixo disso, a máscara de sub-rede de 255.255.255.0 é escrita. Abaixo disso, a máscara de sub-rede é convertida para 11111111 111111 111111 00000000. Uma linha é desenhada abaixo do equivalente binário da máscara de sub-rede. Abaixo da linha está o equivalente decimal e binário com pontos do endereço de rede IPv4, conforme determinado pelo processo de AND. Uma caixa azul sombreada mostra o primeiro bit do endereço de host IPv4, um 1, comparado ao primeiro bit da máscara de sub-rede, também um 1, resultando em 1 como o primeiro valor de bit no endereço de rede IPv4. O endereço de rede IPv4 é 192.168.10.0 com um equivalente binário de 11000000 101001000 00001010 00000000.

![[Pasted image 20240123112405.png]]

Usando a primeira sequência de bits como exemplo, observe que a operação E é executada no 1 bit do endereço do host com o 1 bit da máscara de sub-rede. Isso resulta em um bit 1 para o endereço de rede. 1 E 1 = 1.

A operação AND entre um endereço de host IPv4 e uma máscara de sub-rede resulta no endereço de rede IPv4 para este host. Neste exemplo, a operação AND entre o endereço de host 192.168.10.10 e a máscara de sub-rede 255.255.255.0 (/24) resulta no endereço de rede IPv4 192.168.10.0/24. Esta é uma operação IPv4 importante, pois informa ao host a qual rede pertence.

## Sub redes e domínos de Broadcast
A rede 192.168.10.0/24 pode suportar 254 hosts. Redes maiores, como 172.16.0.0/16, podem suportar muitos mais endereços de host (mais de 65.000). No entanto, isso pode potencialmente criar um domínio de Broadcast maior. Um problema desse tipo de domínio é que os hosts podem gerar broadcasts em excesso e afetar a rede de forma negativa. Na figura, a LAN 1 conecta 400 usuários que podem, cada um, gerar tráfego de broadcast. Tanto tráfego de broadcast pode retardar as operações da rede. Ele também pode tornar as operações do dispositivo mais lentas porque cada dispositivo deve aceitar e processar cada pacote de broadcast.

Um roteador, R1, está conectado a um switch via interface G0/0. O switch possui conexões com outros três switches. O domínio de broadcast consiste nos quatro switches e na interface do roteador à qual eles estão conectados. Isso é identificado como LAN1 com um endereço de 172.16.0.0/16. Uma conexão do roteador à Internet não está dentro do domínio de broacast.

### Um Domínio de Broadcast Grande
![[Pasted image 20240123112431.png]]

A solução é reduzir o tamanho da rede para criar domínios de broadcast menores em um processo denominado divisão em sub-redes. Os espaços de rede menores são chamados de sub-redes.

Na Figura 2, por exemplo, os 400 usuários da LAN 1 com endereço de rede 172.16.0.0 /16 foram divididos em duas sub-redes de 200 usuários cada: 172.16.0.0 /24 e 172.16.1.0 /24. Os broadcasts são propagados apenas dentro dos domínios de broadcast menores. Portanto, um broadcast em LAN 1 não se propagaria para LAN 2.

Observe como o comprimento do prefixo mudou de /16 para /24. Esta é a base da divisão em sub-redes: usar bits de host para criar sub-redes adicionais.

Um roteador, R1, está conectado a duas LANs que representam dois domínios de difusão diferentes. Conectado à esquerda via G0/0 é um switch que suporta 200 usuários em LAN 1 com um endereço de rede de 172.16.0.0/24. Conectado à direita via G0/1 é um switch que suporta 200 usuários em LAN 2 com um endereço de rede de 172.16.1.0/24.

### Comunicação entre Redes
![[Pasted image 20240123112446.png]]

**Observação**: os termos sub-rede e rede costumam ser usados de maneira intercambiável. A maioria das redes são uma sub-rede de um bloco de endereços maior.

A divisão em sub-redes reduz o tráfego total da rede e melhora seu desempenho. Ele também permite que um administrador implemente políticas de segurança que controlam quais sub-redes têm permissão para se comunicar entre si, por exemplo.

Há várias maneiras de usar sub-redes para gerenciar dispositivos de rede. Os administradores de rede podem agrupar dispositivos e serviços em sub-redes que podem ser determinadas por uma variedade de fatores.

**Localização**
![[Pasted image 20240123112530.png]]


**Departamento**
![[Pasted image 20240123112611.png]]


**Tipo de dispositivo**
![[Pasted image 20240123112624.png]]

Um analista de segurança cibernética não precisa saber como segregar em sub-rede. No entanto, é importante saber o significado da máscara de sub-rede e que os hosts com endereços em sub-redes diferentes vêm de locais físicos ou virtuais diferentes em uma rede.

# Tipos de endereços IPv4
## Classes de endereços IPv4 e máscaras de sub-rede padrão
Existem vários tipos e classes de endereços IPv4. Embora as classes de endereço estejam se tornando menos importantes na rede, elas ainda são usadas e referenciadas comumente na documentação da rede.

**Classes de endereços**

Em 1981, os endereços IPv4 de Internet eram atribuídos com um endereçamento classful (RFC 790) Os clientes estavam alocados em um endereço de rede em uma das três classes, A, B, ou C. A RFC dividiu os intervalos de unicast em classes específicas chamadas:

- **Classe A** (0.0.0.0/8 a 127.0.0.0/8) - Projetado para suportar redes extremamente grandes com mais de 16 milhões de endereços de host. Usava um prefixo fixo /8 com o primeiro octeto para endereços de rede e os três octetos restantes para endereços de host.
- **Classe B** (128.0.0.0 / 16 - 191.255.0.0 / 16) - Projetada para oferecer suporte às necessidades de redes de tamanho moderado a grande com até aproximadamente 65.000 endereços de host. Usava um prefixo fixo /16 com os dois octetos de mais alta ordem para endereços de rede e os dois octetos restantes para endereços de host.
- **Classe C** (192.0.0.0 / 24 - 223.255.255.0 / 24) - Projetado para oferecer suporte a pequenas redes com no máximo 254 hosts. Usava um prefixo fixo /24 com os primeiros três octetos para endereços de rede e o octeto restante para endereços de host.

**Observação**: Há também um bloco multicast de Classe D consistindo de 224.0.0.0 a 239.0.0.0 e um bloco de endereço experimental de Classe E consistindo de 240.0.0.0 - 255.0.0.0.

Como mostrado na figura, o sistema classful alocava 50% dos endereços IPv4 disponíveis para 128 redes de Classe A, 25% dos endereços para a Classe B, e a Classe C compartilhava os 25% restantes com as Classes D e E. Embora adequado na época, já que a Internet estava em expansão, obviamente esse método era um desperdício de endereços e esgotava o número de endereços de rede IPv4 disponíveis.

![[Pasted image 20240123112702.png]]

O endereçamento classful foi abandonado no fim dos anos de 1990 e substituído por um sistema mais moderno que não usa classe (classless). No entanto, como veremos mais tarde, o endereçamento sem classe era apenas uma solução temporária para o esgotamento de endereços IPv4.

## Endereços privados reservados
Os endereços IPv4 públicos são endereços roteados globalmente entre os roteadores ISP. No entanto, nem todos os endereços IPv4 disponíveis podem ser usados na Internet . Existem blocos de endereços (conhecidos como endereços privados) que são usados pela maioria das organizações para atribuir endereços IPv4 a hosts internos.

Em meados da década de 1990, os endereços IPv4 privados foram introduzidos devido ao esgotamento do espaço de endereços IPv4. Os endereços IPv4 privados são reservados e podem ser usados por uma rede interna.

Os blocos de endereços privados

- 10.0.0.0 /8 ou 10.0.0.0 para 10.255.255.255
- 172.16.0.0 /12 ou 172.16.0.0 a 172.31.255.255
- 192.168.0.0 /16 ou 192.168.0.0 a 192.168.255.255

É importante saber que os endereços desses blocos não são permitidos na Internet e devem ser filtrados (descartados) pelos roteadores de Internet. Por exemplo, na figura, os usuários das redes 1, 2 ou 3 estão enviando pacotes para destinos remotos. Os roteadores do ISP constatam que os endereços IPv4 origem nos pacotes são endereços privados e descartam os pacotes.

A figura mostra três redes separadas, rede 1 em 10 ponto 0 ponto 0 ponto 0/8, rede 2 em 172 ponto 16 ponto 0 ponto 0/16 e rede 3 em 192 ponto 168 ponto 0 ponto 0. Cada roteador de rede se conecta ao seu próprio roteador i s p. Os roteadores ISP estão conectados à Internet. As redes são endereçadas de modo privado. Na figura, cada roteador está enviando um pacote endereçado de modo privado para o roteador ISP. Cada roteador ISP tem um X vermelho sobre o link significando que o roteador não aceitará o pacote.

### Endereços privados não podem ser roteados pela Internet
![[Pasted image 20240123112725.png]]

A maioria das organizações usa endereços IPv4 privados para seus hosts internos. No entanto, esses endereços da RFC 1918 não podem ser roteados na Internet e devem ser convertidos em um endereço IPv4 público. A NAT (conversão de endereços de rede) é usada para converter endereços IPv4 privados em endereços IPv4 públicos. Normalmente isso é feito no roteador que conecta a rede interna à rede do ISP.

Roteadores domésticos têm a mesma capacidade. Por exemplo, a maioria dos roteadores atribui endereços IPv4 a seus hosts com e sem fio com base no endereço privado 192.168.1.0 /24. A interface do roteador doméstico que se conecta à rede do provedor de serviços de Internet (ISP) geralmente recebe um endereço IPv4 público para usar na Internet.

# O gateway padrão
## Decisão de Encaminhamento do Host
Com IPv4 e IPv6, os pacotes são sempre criados no host de origem. O host de origem deve ser capaz de direcionar o pacote para o host de destino. Para fazer isso, os dispositivos finais do host criam sua própria tabela de roteamento. Este tópico discute como os dispositivos finais usam tabelas de roteamento.

Outra função da camada de rede é direcionar pacotes entre hosts. Um host pode enviar um pacote para o seguinte:

- **Próprio** - Um host pode executar ping em si mesmo enviando um pacote para um endereço IPv4 especial de 127.0.0.1 ou um endereço IPv6 :: / 1, conhecido como interface de loopback. O ping na interface de loopback testa a pilha de protocolos do TCP/IP no host.
- **Host local** - este é um host de destino que está na mesma rede local que o host de envio. Os hosts de origem e destino compartilham o mesmo endereço de rede.
- **Host remoto** - este é um host de destino em uma rede remota. Os hosts de origem e destino não compartilham o mesmo endereço de rede.

A figura ilustra a conexão PC1 a um host local na mesma rede e a um host remoto localizado em outra rede.
![[Pasted image 20240123112756.png]]

Se um pacote é destinado a um host local ou a um host remoto é determinado pelo dispositivo final de origem. O dispositivo final de origem determina se o endereço IP de destino está na mesma rede em que o próprio dispositivo de origem está. O método de determinação varia de acordo com a versão IP:

- **Em IPv4** - o dispositivo de origem usa sua própria máscara de sub-rede junto com seu próprio endereço IPv4 e o endereço IPv4 de destino para fazer essa determinação.
- **Em IPv6** - o roteador local anuncia o endereço da rede local (prefixo) para todos os dispositivos da rede.

Em uma rede doméstica ou comercial, você pode ter vários dispositivos com e sem fio interconectados usando um dispositivo intermediário, como um switch LAN ou um ponto de acesso sem fio (WAP). Este dispositivo intermediário fornece interconexões entre hosts locais na rede local. Os hosts locais podem interagir entre si e compartilhar informações sem a necessidade de dispositivos adicionais. Se um host estiver enviando um pacote para um dispositivo configurado com a mesma rede IP que o dispositivo host, o pacote será simplesmente encaminhado para fora da interface do host, através do dispositivo intermediário e diretamente ao dispositivo de destino.

Obviamente, na maioria das situações, queremos que nossos dispositivos possam se conectar além do segmento de rede local, como em outras residências, empresas e na Internet. Os dispositivos que estão além do segmento de rede local são conhecidos como hosts remotos. Quando um dispositivo de origem envia um pacote a um dispositivo de destino remoto, é necessária a ajuda de roteadores e do roteamento. O roteamento é o processo de identificação do melhor caminho até um destino. O roteador conectado ao segmento de rede local é conhecido como gateway padrão (default gateway).

## Gateway Padrão

O gateway padrão é o dispositivo de rede (ou seja, roteador ou switch da Camada 3) que pode rotear o tráfego para outras redes. Comparando a rede com uma sala, o gateway padrão é a porta. Se você quiser ir para outra sala (rede), vai precisar encontrar essa porta.

Em uma rede, um gateway padrão geralmente é um roteador com esses recursos:

- Ele possui um endereço IP local no mesmo intervalo de endereços que outros hosts na rede local.
- Ele pode aceitar dados na rede local e encaminhar dados para fora da rede local.
- Ele direciona o tráfego para outras redes.

Um gateway padrão é necessário para enviar tráfego fora da rede local. O tráfego não pode ser encaminhado para fora da rede local se não houver gateway padrão, o endereço de gateway padrão não estiver configurado ou o gateway padrão estiver inativo.

## Um host direciona para o gateway padrão
Uma tabela de roteamento de host normalmente inclui um gateway padrão. No IPv4, o host recebe o endereço IPv4 do gateway padrão dinamicamente do DHCP (Dynamic Host Configuration Protocol) ou configurado manualmente. No IPv6, o roteador anuncia o endereço de gateway padrão ou o host pode ser configurado manualmente.

Na figura, PC1 e PC2 são configurados com o endereço IPv4 de 192.168.10.1 como o gateway padrão.

![[Pasted image 20240123112839.png]]

A configuração do gateway padrão cria uma rota padrão na tabela de roteamento do computador. Uma rota padrão é a rota ou o caminho que o computador usa quando tenta entrar em contato com uma rede remota.

Tanto PC1 quanto PC2 terão uma rota padrão para enviar todo o tráfego destinado a redes remotas para R1.


## Tabelas de Roteamento dos Hosts
Em um host do Windows, o comando **route print** ou **netstat -r** pode ser usado para exibir a tabela de roteamento do host. Ambos os comandos geram a mesma saída. O resultado pode parecer confuso no começo, mas é bastante simples de entender.

A figura exibe uma topologia de exemplo e a saída gerada pelo **netstat –r** comando.

![[Pasted image 20240123112902.png]]

### Tabela de Roteamento IPv4 de PC1

```
C:\Users\PC1 > netstat -r 
IPv4 Route Table
=======================================================================================
Active Routes:
Network Destination Netmask Gateway Interface Metric
          0.0.0.0 0.0.0 192.168.10.1 192.168.10.10 25
        127.0.0.0 255.0.0.0 No link 127.0.0.1 306
        127.0.0.1 255.255.255.255 On-Link 127.0.0.1 306
  127.255.255.255 255.255.255 On-Link 127.0.0.1 306
     192.168.10.0 255.255.255.0 No link 192.168.10.10 281
    192.168.10.10 255.255.255.255 On-Link 192.168.10.10 281
   192.168.10.255 255.255.255.255 On-Link 192.168.10.10 281
        224.0.0.0 240.0.0.0 No link 127.0.0.1 306
        224.0.0.0 240.0.0.0 No link 192.168.10.10 281
  255.255.255.255 255.255.255.255 On-link 127.0.0.1 306
  255.255.255.255 255.255.255 On-Link 192.168.10.10 281
```

**Observação**: a saída exibe apenas a tabela de rotas IPv4.

A inserção do comando **netstat -r** ou o comando equivalente **route print** exibe três seções relacionadas às conexões de rede TCP / IP atuais:

- **Lista de interface** - lista o endereço de controle de acesso à mídia (MAC) e o número de interface atribuído de cada interface com capacidade de rede no host, incluindo adaptadores Ethernet, Wi-Fi e Bluetooth.
- **Tabela de rotas IPv4** - lista todas as rotas IPv4 conhecidas, incluindo conexões diretas, rede local e rotas padrão locais.
- **Tabela de rotas IPv6** - lista todas as rotas IPv6 conhecidas, incluindo conexões diretas, rede local e rotas padrão locais.

# IPv6
## Necessidade de IPv6
Você já sabe que o IPv4 está ficando sem endereços. É por isso que você precisa aprender sobre IPv6.

Projetado para ser o sucessor do IPv4, o IPv6 tem um maior espaço de endereços de 128 bits, fornecendo 340 undecilhões de endereços (340 seguido por 36 zeros). No entanto, o IPv6 é mais do que apenas endereços maiores.

Quando a IETF começou o desenvolvimento de um sucessor para o IPv4, aproveitou para corrigir as limitações do IPv4 e incluir aprimoramentos. Um exemplo é o ICMPv6 (Internet Control Message Protocol versão 6), que inclui a resolução de endereços e a configuração automática de endereços, não encontradas no ICMP para IPv4 (ICMPv4).

A redução do espaço de endereços IPv4 tem sido o principal fator para migrar para o IPv6. À medida que África, Ásia e outras áreas do mundo ficarem mais conectadas à Internet, não haverá endereços IPv4 suficientes para acomodar esse crescimento. Conforme mostra a figura, quatro dos cinco RIRs estão com endereços IPv4 esgotados.

O gráfico mostra um mapa global dos cinco registros regionais da internet e há datas de exaustão IPv4. A data de exaustão do ARINs IPv4 é julho de 2015, os dados de exaustão do RIPE NCCs são setembro de 2012, a data de exaustão das APNICs é junho de 2014, a data de exaustão de LACNICs é abril de 2011 e a data de exaustão projetada pela AFRINICs é 2020.

### RIR IPv4 Exhaustion Dates
O IPv4 tem um máximo teórico de 4,3 bilhões de endereços. Combinados à NAT (tradução de endereços de rede), os endereços privados foram imprescindíveis para retardar a redução do espaço de endereços IPv4. No entanto, o NAT é problemático para muitos aplicativos, cria latência e possui limitações que impedem severamente as comunicações ponto a ponto.

Com o número cada vez maior de dispositivos móveis, os provedores móveis têm liderado o caminho com a transição para o IPv6. Os dois principais provedores de telefonia móvel nos Estados Unidos relatam que mais de 90% de seu tráfego usa IPv6.

A maioria dos principais ISPs e provedores de conteúdo, como YouTube, Facebook e NetFlix, também fizeram a transição. Muitas empresas como Microsoft, Facebook e LinkedIn estão fazendo transição para IPv6 somente internamente. Em 2018, a ISP Comcast de banda larga relatou uma implantação de mais de 65% e a British Sky Broadcasting mais de 86%.

**⁪Internet das Coisas**

A internet de hoje é significativamente diferente da internet das últimas décadas. A internet de hoje é mais do que e-mail, páginas da web e transferências de arquivos entre computadores. A Internet em evolução está se tornando uma Internet das Coisas (IoT). Os únicos dispositivos que acessam a Internet não serão mais computadores, tablets e smartphones. Os dispositivos equipados com sensor e prontos para a Internet de amanhã incluirão tudo, desde automóveis e dispositivos biomédicos, até eletrodomésticos e ecossistemas naturais.

Com uma população cada vez maior na Internet, espaço de endereços IPv4 limitado, problemas com NAT e uma Internet das Coisas, chegou o momento de iniciar a transição para o IPv6.

## Formatos de Endereço IPv6
O primeiro passo para aprender sobre IPv6 em redes é entender a forma como um endereço IPv6 é escrito e formatado. Os endereços IPv6 são muito maiores do que os endereços IPv4, razão pela qual é improvável que fiquemos sem eles.

Os endereços IPv6 têm 128 bits e são escritos como uma sequência de valores hexadecimais. Cada 4 bits são representados por um único dígito hexadecimal, totalizando 32 valores hexadecimais, como mostra a Figura 1. Os endereços IPv6 não diferenciam maiúsculas e minúsculas e podem ser escritos tanto em minúsculas como em maiúsculas.

### Segmentos ou Hextets de 16 bits
![[Pasted image 20240123112953.png]]

**Formato Preferencial**

Como mostrado na Figura 1, o formato preferencial para escrever um endereço IPv6 é x: x: x: x: x: x: x: x, com cada “x” consistindo de quatro valores hexadecimais. O termo octeto refere-se aos oito bits de um endereço IPv4. No IPv6, um hexteto é o termo não oficial usado para se referir a um segmento de 16 bits ou quatro valores hexadecimais. Cada “x” equivale a um único hexteto, 16 bits ou quatro dígitos hexadecimais.

Formato preferencial significa que o endereço IPv6 é gravado usando todos os 32 dígitos hexadecimais. Isso não significa necessariamente que é o método ideal para representar o endereço IPv6. Existem duas regras que ajudam a reduzir o número de dígitos necessários para representar um endereço IPv6.

A Figura 3 tem exemplos de endereços IPv6 no formato preferencial.

 2001 : 0db8 : 0000 : 1111 : 0000 : 0000 : 0000: 0200   
 2001 : 0db8 : 0000 : 00a3 : abcd : 0000 : 0000: 1234   
 2001 : 0db8 : 000a : 0001 : c012 : 9aff : fe9a: 19ac   
 2001 : 0db8 : aaaa : 0001 : 0000 : 0000 : 0000: 0000   
 fe80 : 0000 : 0000 : 0000 : 0123 : 4567 : 89ab: cdef   
 fe80 : 0000 : 0000 : 0000 : 0000 : 0000 : 0000: 0001   
 fe80 : 0000 : 0000 : 0000 : c012 : 9aff : fe9a: 19ac   
 fe80 : 0000 : 0000 : 0000 : 0123 : 4567 : 89ab: cdef   
 0000 : 0000 : 0000 : 0000 : 0000 : 0000 : 0000: 0001   
 0000 : 0000 : 0000 : 0000 : 0000 : 0000 : 0000: 0000

## Regra 1 - omitir zeros à esquerda
A primeira regra para ajudar a reduzir a notação de endereços IPv6 é omitir os 0s (zeros) à esquerda de qualquer seção de 16 bits ou hexteto. Aqui estão quatro exemplos de maneiras de omitir zeros à esquerda:

- 01AB pode ser representado como 1AB
- 09f0 pode ser representado como 9f0
- 0a00 pode ser representado como a00
- 00ab pode ser representado como ab

Essa regra se aplica somente aos 0s à esquerda, e NÃO aos 0s à direita. Caso contrário, o endereço ficaria ambíguo. Por exemplo, o hexteto “abc” poderia ser “0abc” ou “abc0”, mas essas duas representações não se referem ao mesmo valor.

|Tipo|Formatar|
|---|---|
|Preferencial|2001 : **0**db8 : **000**0 : 1111 : **000**0 : **000**0 : **000**0 : **0**200|
|Nenhum 0 à esquerda|2001 :  db8 :    0 : 1111 :    0 :    0 :    0 :  200|
|||
|||
|Preferencial|2001 : **0**db8 : **000**0 : **00**a3 : ab00 : **0**ab0 : **00**ab : 1234|
|Nenhum 0 à esquerda|2001 :  db8 :    0 :   a3 : ab00 :  ab0 :   ab : 1234|
|||
|||
|Preferencial|2001 : **0**db8 : **000**a : **000**1 : c012 : 90ff : fe90 : **000**1|
|Nenhum 0 à esquerda|2001 :  db8 :    a :    1 : c012 : 90ff : fe90 :    1|
|||
|||
|Preferencial|2001 : **0**db8 : aaaa : **000**1 : **000**0 : **000**0 : **000**0 : **000**0|
|Nenhum 0 à esquerda|2001 :  db8 : aaaa :    1 :    0 :    0 :    0 :    0|
|||
|||
|Preferencial|fe80 : **000**0 : **000**0 : **000**0 : **0**123 : 4567 : 89ab : cdef|
|Nenhum 0 à esquerda|fe80 :    0 :    0 :    0 :  123 : 4567 : 89ab : cdef|
|||
|||
|Preferencial|fe80 : **000**0 : **000**0 : **000**0 : **000**0 : **000**0 : **000**0 : **000**1|
|Nenhum 0 à esquerda|fe80 :    0 :    0 :    0 :    0 :    0 :    0 :    1|
|||
|||
|Preferencial|**000**0 : **000**0 : **000**0 : **000**0 : **000**0 : **000**0 : **000**0 : **000**1|
|Nenhum 0 à esquerda|0 :    0 :    0 :    0 :    0 :    0 :    0 :    1|
|||
|||
|Preferencial|**000**0 : **000**0 : **000**0 : **000**0 : **000**0 : **000**0 : **000**0 : **000**0|
|Nenhum 0 à esquerda|0 :    0 :    0 :    0 :    0 :    0 :    0 :    0|
## Regra 2 - dois pontos duplos
A segunda regra para ajudar a reduzir a notação de endereços IPv6 é que o uso de dois-pontos duplo (::) pode substituir uma única sequência contígua de um ou mais segmentos de 16 bits (hextetos) compostos exclusivamente por 0s. Por exemplo, 2001:db8:cafe: 1:0:0:0:1 (0s iniciais omitidos) poderia ser representado como 2001:db8:cafe:1::1. O dois-pontos duplos (::) é usado no lugar dos três hextets all-0 (0:0:0).

Os dois-pontos em dobro (::) só podem ser usados uma vez em um endereço; caso contrário, haveria mais de um endereço resultante possível. Quando associada à técnica de omissão dos 0s à esquerda, a notação de endereço IPv6 pode ser bastante reduzida. É o chamado formato compactado.

Aqui está um exemplo do uso incorreto de dois pontos: 2001:db8::abcd::1234.

O dois-pontos duplo é usado duas vezes no exemplo acima. Aqui estão as possíveis expansões deste endereço de formato compactado incorreto:

- 2001:db8::abcd:0000:0000:1234
- 2001:db8::abcd:0000:0000:0000:1234
- 2001:db8:0000:abcd::1234
- 2001:db8:0000:0000:abcd::1234

Se um endereço tiver mais de uma cadeia contígua de todos os hextets 0, a prática recomendada é usar dois pontos duplos (::) na cadeia mais longa. Se as strings forem iguais, a primeira string deve usar dois pontos duplos (::).

|Tipo|Formatar|
|---|---|
|Preferêncial|2001 : **0**db8 : **000**0 : 1111 : **0000** : **0000** : **0000** : **0**200|
|Compressados/espaços|2001 :  db8 :    0 : 1111 :                    :  200|
|Compactado|2001:db8:0:1111::200|
|||
|Preferencial|2001 : **0**db8 : **000**0 : **000**0 : ab00 : **0000** : **0000** : **0000**|
|Compressados/espaços|2001 :  db8 :    0 :    0 : ab00 ::|
|Compactado|2001:db8:0:0:ab00::|
|||
|Preferencial|2001 : **0**db8 : aaaa : **000**1 : **0000** : **0000** : **0000** : **0000**|
|Compressados/espaços|2001 :  db8 : aaaa :    1 ::|
|Compactado|2001:db8:aaaa:1::|
|||
|Preferencial|fe80 : **0000** : **0000** : **0000** : **0**123 : 4567 : 89ab : cdef|
|Compressados/espaços|fe80 :                    :  123 : 4567 : 89ab : cdef|
|Compactado|fe80::123:4567:89ab:cdef|
|||
|Preferencial|fe80 : **0000** : **0000** : **0000** : **0000** : **0000** : **0000** : **000**1|
|Compressados/espaços|fe80 :                                         :    1|
|Compactado|fe80::0|
|||
|Preferencial|**0000** : **0000** : **0000** : **0000** : **0000** : **0000** : **0000** : **000**1|
|Compressados/espaços|::                                                  1|
|Compactado|::1|
|||
|Preferencial|**0000** : **0000** : **0000** : **0000** : **0000** : **0000** : **0000** : **0000**|
|Compressados/espaços|::|
|Compactado|::|

## Comprimento do Prefixo IPv6
Lembre-se de que o prefixo (a parte de rede) de um endereço IPv4 pode ser identificado pelo comprimento do prefixo (notação em barra) ou por uma máscara de sub-rede decimal com pontos. Por exemplo, o endereço IPv4 192.168.1.10 com máscara de sub-rede decimal com pontos 255.255.255.0 é equivalente a 192.168.1.10/24.

No IPv4 o /24 é chamado de prefixo. No IPv6 é chamado de comprimento do prefixo. O IPv6 não usa a notação decimal com pontos da máscara de sub-rede. Como o IPv4, o comprimento do prefixo é representado na notação de barra e é usado para indicar a parte da rede de um endereço IPv6.

O comprimento do prefixo pode variar de 0 a 128. O comprimento do prefixo IPv6 recomendado para LANs e a maioria dos outros tipos de redes é /64, conforme mostrado na figura.

O gráfico mostra um endereço IPv6 dividido em um prefixo de 64 bits e um ID de interface de 64 bits. O prefixo de 64 bits é 2001:0db8:000a:0000. O ID da interface de 64 bits é 0000:0000:0000:0000.

### Comprimento do Prefixo IPv6
![[Pasted image 20240123113111.png]]

É altamente recomendável usar um ID de interface de 64 bits para a maioria das redes. Isso ocorre porque a configuração automática de endereço sem estado (SLAAC) usa 64 bits para o ID de interface. Também facilita a criação e o gerenciamento de sub-redes.

## Verifique sua compreensão - Representação de endereço IPv6

Instruções:

Converta os endereços IPv6 em formatos curtos e compactos (omita os zeros à esquerda). Insira letras em minúsculas. Clique em Avançar para avançar a atividade para o próximo endereço.
![[Pasted image 20240123113205.png]]

# Resumo de protocolo Ethernet e IP
## O que aprendi neste módulo?

**Ethernet**

Ethernet e LAN sem fio (WLANs) são as duas tecnologias LAN mais populares. A Ethernet opera nas camadas físicas e de link de dados do modelo OSI e são definidas nas normas IEEE 802.2 e 802.3. Ethernet suporta larguras de banda de 10 Mbps a 100.000 Mbps. É importante conhecer os campos de quadro Ethernet. Um endereço MAC Ethernet é um valor binário de 48 bits expresso como 12 dígitos hexadecimais (4 bits por dígito hexadecimal). O endereço MAC pode ser representado usando traços, dois-pontos ou pontos entre os grupos de dígitos.

**IPv4**

Os protocolos de camada de rede permitem que os dispositivos finais troquem dados entre redes e internet. IP versão 4 (IPv4) e IP versão 6 (IPv6) são os principais protocolos de comunicação de camada de rede. Para realizar comunicações ponta a ponta através dos limites da rede, os protocolos da camada de rede executam quatro operações básicas: endereçamento de dispositivos finais, encapsulamento, roteamento e descapsulamento. O IP encapsula o segmento da camada de transporte adicionando um cabeçalho IP que é usado para entregar o pacote, que é examinado pelos dispositivos da Camada 3 (ou seja, roteadores e switches da Camada 3), para chegar ao host de destino. IP é sem conexão, melhor esforço e independente de mídia. É importante estar familiarizado com a estrutura do pacote IP.

**Noções básicas de endereçamento IP**

Um endereço IPv4 é um endereço hierárquico de 32 bits, composto por uma parte da rede e uma parte do host. Os bits na parte de rede do endereço devem ser iguais em todos os dispositivos que residem na mesma rede. Os bits na parte de host do endereço devem ser exclusivos para identificar um host específico dentro de uma rede. Um host recebe um endereço IPv4 e uma máscara de sub-rede. A máscara de sub-rede IPv4 é usada para diferenciar a parte da rede da parte do host de um endereço IPv4. O endereço de rede representa todos os dispositivos na mesma rede. O comprimento do prefixo é o número de bits definidos como 1 na máscara de sub-rede. É escrito em “notação de barra”, que é indicada por uma barra (/) seguida pelo número de bits definido como 1. O processo usado para identificar a parte da rede e a parte do host é denominado AND. A sub-rede cria domínios de difusão menores para reduzir o tráfego geral da rede, melhorar o desempenho da rede e implementar políticas de segurança. As sub-redes podem ser usadas para agrupar dispositivos por local, departamento ou tipo de dispositivo.

**Tipos de endereços IPv4**

As primeiras implementações do IPv4 forneceram endereços de rede roteáveis globalmente baseados no sistema clássico usando Classe A, Classe B e Classe C, cada um com diferentes intervalos de endereços IP. No entanto, o sistema de endereçamento clássico era defeituoso e rapidamente esgotado endereços de rede disponíveis e, portanto, foi substituído pelo sistema de endereçamento sem classes. Existem endereços IPv4 públicos e endereços IPv4 privados. Os endereços privados devem ser usados por organizações e não são propagados na internet. Existem três blocos de endereços privados disponíveis.

**O gateway padrão**

Se um pacote é destinado a um host local ou a um host remoto é determinado pelo dispositivo final de origem. Em redes IPv4, o dispositivo de origem usa sua própria máscara de sub-rede junto com seu próprio endereço IPv4 e o endereço IPv4 de destino para fazer essa determinação. Em uma rede IPv6, o roteador local anuncia o endereço da rede local (prefixo) para todos os dispositivos da rede. O roteador conectado ao segmento de rede local é conhecido como gateway padrão. Ele possui um endereço IP local no mesmo intervalo de endereços que outros hosts na rede local. Ele pode aceitar dados na rede local e encaminhar dados para fora da rede local. Ele também roteia o tráfego para outras redes. Uma rota padrão é a rota ou o caminho que o computador usa quando tenta entrar em contato com uma rede remota. Em um host do Windows, o comando **route print** ou **netstat -r** pode ser usado para exibir a tabela de roteamento do host.

**IPv6**

Um endereço IPv6 é um endereço hierárquico de 128 bits. O espaço de endereço de 128 bits fornece um pool muito maior de endereços IP disponíveis publicamente (ou seja, 340 undecillion) do que IPv4 (ou seja, 4,3 bilhões). O IPv6 também inclui o Internet Control Message Protocol versão 6 (ICMPv6), que fornece resolução de endereço e configuração automática de endereço. Esses recursos não são encontrados no ICMPv4. Os endereços IPv6 são escritos como uma string de valores hexadecimais. A cada quatro bits é representado por um único dígito hexadecimal; para um total de 32 valores hexadecimais. Existem duas regras que ajudam a reduzir o número de dígitos necessários para representar um endereço IPv6. A primeira regra é omitir os 0s (zeros) iniciais em qualquer hexteto. A segunda regra é que dois pontos duplos (: :) podem substituir qualquer string única contígua de um ou mais hextetos de 16 bits que consistem em todos os zeros. IPv6 usa o comprimento do prefixo em notação de barra para indicar a parte da rede de um endereço IPv6. O comprimento do prefixo pode variar de 0 a 128. O comprimento recomendado do prefixo IPv6 para LANs e a maioria dos outros tipos de redes é / 64. Isso ocorre porque a configuração automática de endereço sem estado (SLAAC) usa 64 bits para o ID de interface. Também facilita a criação e o gerenciamento de sub-redes.

